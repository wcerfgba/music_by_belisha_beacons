<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta lang="en">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Music by Belisha beacons: a sonic exploration of urban infrastructure, by Stella Aster</title>
  <style>
    body {
      background: #002;
      color: #fff;
      font-family: 'Times New Roman', serif;
      margin: auto;
      padding: 1rem;
      max-width: 60rem;
      margin-bottom: 100rem;
    }
    
    .yellow {
      color: #ff0;
    }
      
    .blink1204 {
      animation: blink 1.204s steps(1, end) infinite;
    }
    
    .blink1554 {
      animation: blink 1.554s steps(1, end) infinite;
    }

    @keyframes blink {
      0% {
        opacity: 1;
      }
      50% {
        opacity: 0;
      }
      100% {
        opacity: 1;
      }
    }

  </style>
</head>

<body>
  <h1>Music by <span class="yellow blink1204">Belisha</span> <span class="yellow blink1554">beacons</span></h1>
  <h2>a sonic exploration of urban infrastructure,<br>by <span class="yellow">Stella Aster</span></h2>
  
  <button id="play">Listen to the beacons</button>
  
  <script src="https://unpkg.com/tone"></script>
    
  <script>
    const keys = new Tone.Sampler({
      urls: {
        C4: "C4.mp3",
        "D#4": "Ds4.mp3",
        "F#4": "Fs4.mp3",
        A4: "A4.mp3",
      },
      release: 1,
      baseUrl: "https://tonejs.github.io/audio/salamander/",
    }).toDestination();
    
    const loops = [
      new Tone.Loop(
        (time) => keys.triggerAttackRelease('F2', 0.602, time),
        0.602 + 0.589
      ).start(Date.parse('2024-11-19 18:04:28.388') / 1000),
      new Tone.Loop(
        (time) => keys.triggerAttackRelease('A2', 0.777, time),
        0.777 + 0.753
      ).start(Date.parse('2024-11-19 18:04:29.221') / 1000),
      new Tone.Loop(
        (time) => keys.triggerAttackRelease('C3', 0.759, time),
        0.759 + 0.738
      ).start(Date.parse('2024-11-19 18:04:28.488') / 1000),
      new Tone.Loop(
        (time) => keys.triggerAttackRelease('E3', 0.900, time),
        0.900 + 0.600
      ).start(Date.parse('2024-11-19 18:04:29.821') / 1000),
      new Tone.Loop(
        (time) => keys.triggerAttackRelease('G3', 0.778, time),
        0.778 + 0.761
      ).start(Date.parse('2024-11-19 18:07:05.924') / 1000),
      new Tone.Loop(
        (time) => keys.triggerAttackRelease('B3', 0.767, time),
        0.767 + 0.761
      ).start(Date.parse('2024-11-19 18:07:06.257') / 1000),
      new Tone.Loop(
        (time) => keys.triggerAttackRelease('D4', 0.894, time),
        0.894 + 0.605
      ).start(Date.parse('2024-11-19 18:07:06.623') / 1000),
    ];
  
    document
      .querySelector("#play")
      .addEventListener("click", () => {
        keys.detune
        Tone.Transport.seconds =  Date.now() / 1000;
        Tone.Transport.toggle();
      });
  </script>
</body>

</html>
